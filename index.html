<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnapThought - Voice to App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">SnapThought ‚ú®</h1>
            <p class="subtitle">Speak Your App Into Existence</p>
        </header>

        <div class="main-content">
            <!-- API Key Input Section -->
            <div id="apiKeySection" class="card">
                <h2 class="section-title">üîë Setup Your API Key</h2>
                <div class="input-group">
                    <input 
                        type="password" 
                        id="apiKeyInput" 
                        placeholder="Paste your Cerebras API key here..."
                        class="api-input"
                    >
                    <button onclick="saveApiKey()" class="btn btn-primary">
                        Save Key
                    </button>
                </div>
                <p class="help-text">Get your key from <a href="https://cloud.cerebras.ai" target="_blank" class="link">cloud.cerebras.ai</a></p>
            </div>

            <!-- Main Interface -->
            <div id="mainInterface" class="hidden">
                <!-- Voice Input Section -->
                <div class="card">
                    <div class="mic-container">
                        <button id="recordBtn" onclick="toggleRecording()" class="mic-button">
                            <svg id="micIcon" class="mic-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                            </svg>
                        </button>
                        <p class="record-status" id="recordStatus">Click to start recording</p>
                    </div>

                    <!-- Transcript Display -->
                    <div id="transcriptBox" class="transcript-box hidden">
                        <p class="transcript-label">You said:</p>
                        <p id="transcriptText" class="transcript-text"></p>
                    </div>

                    <!-- Quick Examples -->
                    <div class="examples-grid">
                        <button onclick="useExample('Create a beautiful portfolio website with hero section, about me, skills cards with icons, and contact form. Use modern design with gradients')" class="example-btn">
                            üíº Portfolio Website
                        </button>
                        <button onclick="useExample('Build a weather dashboard with city search, current weather display, 5-day forecast cards, and beautiful weather icons. Use glassmorphism design')" class="example-btn">
                            üå§Ô∏è Weather Dashboard
                        </button>
                        <button onclick="useExample('Create a task management app with add task form, task list with checkboxes, priority tags, filter buttons, and dark mode toggle. Modern UI with animations')" class="example-btn">
                            ‚úÖ Task Manager
                        </button>
                    </div>
                </div>

                <!-- Loading State -->
                <div id="loadingState" class="card loading-card hidden">
                    <div class="spinner"></div>
                    <p class="loading-title">Creating your app...</p>
                    <p class="loading-step" id="loadingStep">Analyzing your idea</p>
                </div>

                <!-- Result Section -->
                <div id="resultSection" class="hidden">
                    <div class="card result-card">
                        <div class="result-header">
                            <h2 class="result-title">üéâ Your App is Ready!</h2>
                            <div class="button-group">
                                <button onclick="downloadAllFiles()" class="btn btn-success">
                                    üì¶ Download All Files
                                </button>
                                <button onclick="openInNewTab()" class="btn btn-primary">
                                    üöÄ Open in New Tab
                                </button>
                            </div>
                        </div>
                        
                        <!-- Preview Frame -->
                        <div class="preview-container">
                            <iframe id="previewFrame" class="preview-frame"></iframe>
                        </div>

                        <!-- File Tabs -->
                        <div class="code-section">
                            <div class="tabs">
                                <button onclick="showFile('html')" id="tabHtml" class="tab tab-active">
                                    index.html
                                </button>
                                <button onclick="showFile('css')" id="tabCss" class="tab">
                                    style.css
                                </button>
                                <button onclick="showFile('js')" id="tabJs" class="tab">
                                    script.js
                                </button>
                            </div>
                            
                            <div class="code-container">
                                <button onclick="copyCurrentFile()" class="copy-btn">
                                    Copy
                                </button>
                                <pre id="htmlCode" class="code-display"><code></code></pre>
                                <pre id="cssCode" class="code-display hidden"><code></code></pre>
                                <pre id="jsCode" class="code-display hidden"><code></code></pre>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button onclick="startOver()" class="btn btn-secondary">
                                Create Another App
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>